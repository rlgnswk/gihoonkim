{% include base_path %}

{% if page.author and site.data.authors[page.author] %}
  {% assign author = site.data.authors[page.author] %}
{% else %}
  {% assign author = site.author %}
{% endif %}

<div itemscope itemtype="http://schema.org/Person">

  <div class="author__avatar">
    {% assign av = author.avatar | default: "" %}
    {% if av contains "://" %}
      <img src="{{ av }}" alt="{{ author.name }}" fetchpriority="high" />
    {% else %}
      {%- comment -%}
      Accept either:
      - "profile.jpg"  (recommended)
      - "/images/profile.jpg"
      - "images/profile.jpg"
      and always make it baseurl-safe via relative_url.
      {%- endcomment -%}

      {% if av == "" %}
        {% assign avatar_path = "/images/profile.jpg" %}
      {% elsif av contains "/images/" %}
        {% assign avatar_path = av %}
      {% elsif av contains "images/" %}
        {% assign avatar_path = "/" | append: av %}
      {% elsif av contains "/" %}
        {% assign avatar_path = av %}
      {% else %}
        {% assign avatar_path = "/images/" | append: av %}
      {% endif %}

      <img src="{{ avatar_path | relative_url }}" alt="{{ author.name }}" fetchpriority="high" />
    {% endif %}
  </div>

  <div class="author__content">
    <h3 class="author__name">{{ author.name }}</h3>
    {% if author.pronouns %}<p class="author__pronouns">{{ author.pronouns }}</p>{% endif %}
    {% if author.bio %}<p class="author__bio">{{ author.bio }}</p>{% endif %}
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">

      {% if author.location %}
        <li class="author__desktop"><i class="fas fa-fw fa-location-dot icon-pad-right" aria-hidden="true"></i>{{ author.location }}</li>
      {% endif %}
      {% if author.employer %}
        <li class="author__desktop"><i class="fas fa-fw fa-building-columns icon-pad-right" aria-hidden="true"></i>{{ author.employer }}</li>
      {% endif %}
      {% if author.email %}
        <li><a href="mailto:{{ author.email }}"><i class="fas fa-fw fa-envelope icon-pad-right" aria-hidden="true"></i>Email</a></li>
      {% endif %}

      {% if author.googlescholar %}
        <li><a href="{{ author.googlescholar }}"><i class="ai ai-google-scholar ai-fw icon-pad-right"></i>Google Scholar</a></li>
      {% endif %}
      {% if author.github %}
        <li><a href="https://github.com/{{ author.github }}"><i class="fab fa-fw fa-github icon-pad-right" aria-hidden="true"></i>GitHub</a></li>
      {% endif %}
      {% if author.linkedin %}
        <li><a href="https://www.linkedin.com/in/{{ author.linkedin }}"><i class="fab fa-fw fa-linkedin icon-pad-right" aria-hidden="true"></i>LinkedIn</a></li>
      {% endif %}

    </ul>
  </div>
</div>
